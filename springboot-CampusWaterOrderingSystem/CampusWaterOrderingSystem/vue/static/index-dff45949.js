import{af as e,b as a,a as l,r as t,w as r,f as n,ag as i,h as o,X as d,k as s,j as u,o as c,i as p,m as g,ah as m,A as v,ai as y,z as h,ak as f,al as b,am as _,E as z,H as C,I as P,_ as w}from"./index-2dac3e0d.js";import{u as N}from"./usePagination-526c8b6d.js";const S={class:"app-container"},k={class:"toolbar-wrapper"},x=(e=>(C("data-v-b5b59e9b"),e=e(),P(),e))((()=>h("div",null,null,-1))),T={class:"table-wrapper"},D={class:"pager-wrapper"},I=w(a({name:"products",__name:"index",setup(a){const C=l(!1),{paginationData:P,handleCurrentChange:w,handleSizeChange:I}=N(),B=a=>{_.confirm(`正在删除用户：${a.deliveryName}，确认删除？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var l;(l={deliveryId:a.deliveryId},e({url:"delivery/deleteDeliver",method:"DELETE",params:l})).then((e=>{z.success("删除成功"),L()}))}))},E=t([]),j=l(null),A=t({deliveryName:""}),L=()=>{var a,l;C.value=!0,0!==A.deliveryName.length?(a={pageNum:P.currentPage,pageSize:P.pageSize},l={deliveryName:A.deliveryName},e({url:"delivery/getAllDeliverByName",method:"POST",data:{...a,param:l}})).then((e=>{E.length=0,P.total=e.data.totalRecords,E.push(...e.data.deliveryList)})).catch((e=>{E.length=0})).finally((()=>{C.value=!1})):function(a){return e({url:"delivery/getAllDeliver",method:"POST",data:a})}({pageSize:P.pageSize,pageNum:P.currentPage}).then((e=>{E.length=0,P.total=e.data.totalRecords,E.push(...e.data.deliveryList)})).catch((e=>{E.length=0})).finally((()=>{C.value=!1}))},R=()=>{1===P.currentPage&&L(),P.currentPage=1},V=()=>{var e;A.deliveryName="",null==(e=j.value)||e.resetFields(),1===P.currentPage&&L(),P.currentPage=1},F=()=>{L()};return r([()=>P.currentPage,()=>P.pageSize],L,{immediate:!0}),(e,a)=>{const l=n("el-input"),t=n("el-form-item"),r=n("el-button"),z=n("el-form"),N=n("el-card"),L=n("el-tooltip"),O=n("el-table-column"),H=n("el-table"),U=n("el-pagination"),X=i("loading");return c(),o("div",S,[d((c(),s(N,{shadow:"never",class:"search-wrapper"},{default:u((()=>[p(z,{ref_key:"searchFormRef",ref:j,inline:!0,model:A},{default:u((()=>[p(t,{prop:"productName",label:"用户名"},{default:u((()=>[p(l,{modelValue:A.deliveryName,"onUpdate:modelValue":a[0]||(a[0]=e=>A.deliveryName=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(t,null,{default:u((()=>[p(r,{type:"primary",icon:g(m),onClick:R},{default:u((()=>[v("查询")])),_:1},8,["icon"]),p(r,{icon:g(y),onClick:V},{default:u((()=>[v("重置")])),_:1},8,["icon"])])),_:1})])),_:1},8,["model"])])),_:1})),[[X,C.value]]),d((c(),s(N,{shadow:"never"},{default:u((()=>[h("div",k,[x,h("div",null,[p(L,{content:"下载"},{default:u((()=>[p(r,{type:"primary",icon:g(f),circle:""},null,8,["icon"])])),_:1}),p(L,{content:"刷新表格"},{default:u((()=>[p(r,{type:"primary",icon:g(b),circle:"",onClick:F},null,8,["icon"])])),_:1})])]),h("div",T,[p(H,{data:E},{default:u((()=>[p(O,{type:"selection",width:"50",align:"center"}),p(O,{prop:"deliveryId",label:"id",align:"center"}),p(O,{prop:"deliveryName",label:"用户名",align:"center"}),p(O,{prop:"deliveryPhone",label:"电话",align:"center"}),p(O,{prop:"gender",label:"性别",align:"center"}),p(O,{prop:"balance",label:"余额",align:"center"}),p(O,{prop:"userPassword",label:"密码",align:"center"},{default:u((e=>[p(r,{type:"primary",text:"",bg:"",size:"small",onClick:a=>{return l=e.row.deliveryPassword,void _.alert(l,"配送员密码",{confirmButtonText:"关闭"});var l}},{default:u((()=>[v("查看密码")])),_:2},1032,["onClick"])])),_:1}),p(O,{fixed:"right",label:"操作",width:"150",align:"center"},{default:u((e=>[p(r,{type:"danger",text:"",bg:"",size:"small",onClick:a=>B(e.row)},{default:u((()=>[v("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),h("div",D,[p(U,{background:"",layout:g(P).layout,"page-sizes":g(P).pageSizes,total:g(P).total,"page-size":g(P).pageSize,currentPage:g(P).currentPage,onSizeChange:g(I),onCurrentChange:g(w)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[X,C.value]])])}}}),[["__scopeId","data-v-b5b59e9b"]]);export{I as default};
